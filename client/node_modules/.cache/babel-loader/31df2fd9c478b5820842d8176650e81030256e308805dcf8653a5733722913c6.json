{"ast":null,"code":"import React,{useState}from\"react\";import{NavLink,useParams}from\"react-router-dom\";import{API_URL}from\"../../../config/contansts\";import{Pagination}from\"antd\";import axios from\"axios\";import\"./ProductTable.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const StoreTable=_ref=>{let{data,setData}=_ref;const CId=useParams();// 주소에서 카테고리id를 가져옴\nconst[currentPage,setCurrentPage]=useState(1);// 페이징 현제페이지\nconst itemsPerPage=3;// 페이징 한번에 보여줄 tr의 개수\nconst columns=[// 원하는 열의 이름을 추가\n\"id\",\"thumbnail_img_url\",\"k_name\",\"price\",\"description\",\"created_at\"];const handleDelete=id=>{// 삭제 로직 구현\naxios.delete(\"\".concat(API_URL,\"/api/product/\").concat(id)).then(res=>{setData(prevProducts=>prevProducts.filter(prod=>prod.id!==id)//삭제한 것 의외의 것만 담음\n);alert(\"삭제되었습니다.\");}).catch(err=>{console.error(err);alert(\"삭제에 실패했습니다.\");});};// 현재 페이지용 인덱스 계산\nconst indexOfLastItem=currentPage*itemsPerPage;const indexOfFirstItem=indexOfLastItem-itemsPerPage;const currentItems=data.slice(indexOfFirstItem,indexOfLastItem);if(!currentItems||currentItems.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});}// 페이지 변경을 처리하는 함수\nconst handlePageChange=page=>{setCurrentPage(page);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"adminProd\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"adminProd_header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"product\"}),/*#__PURE__*/_jsx(NavLink,{to:\"upload\",id:\"uploadBtn\",state:CId,children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uCD94\\uAC00\\uD558\\uAE30\"})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"ProdTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[columns.map((column,index)=>/*#__PURE__*/_jsx(\"th\",{children:column},index)),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0AD\\uC81C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentItems.map((prod,rowIndex)=>/*#__PURE__*/_jsxs(\"tr\",{id:\"id-\".concat(prod.id),className:\"rowIndex-\".concat(rowIndex),children:[columns.map((column,colIndex)=>/*#__PURE__*/_jsx(_Fragment,{children:colIndex===1?/*#__PURE__*/_jsx(\"td\",{id:\"img_box\",children:/*#__PURE__*/_jsx(\"img\",{id:\"burger_img\",src:API_URL+prod[column],alt:\"thumbnail-\".concat(prod.id)})}):/*#__PURE__*/_jsx(\"td\",{children:colIndex===3?prod[column].toLocaleString()+\"원\":prod[column]},colIndex)})),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(NavLink,{id:\"editLink\",to:\"edit\",state:prod,children:[\" \",\"\\uC218\\uC815\"]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"tableDeletebtn\",onClick:()=>handleDelete(prod.id)//클릭한 행의 상품의id를 보냄\n,children:\"\\uC0AD\\uC81C\"})})]},rowIndex))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:/*#__PURE__*/_jsx(Pagination,{current:currentPage,total:data.length,pageSize:itemsPerPage,onChange:handlePageChange})})]})});};export default StoreTable;","map":{"version":3,"names":["React","useState","NavLink","useParams","API_URL","Pagination","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StoreTable","_ref","data","setData","CId","currentPage","setCurrentPage","itemsPerPage","columns","handleDelete","id","delete","concat","then","res","prevProducts","filter","prod","alert","catch","err","console","error","indexOfLastItem","indexOfFirstItem","currentItems","slice","length","children","handlePageChange","page","to","state","className","map","column","index","rowIndex","colIndex","src","alt","toLocaleString","onClick","current","total","pageSize","onChange"],"sources":["C:/Users/user/Desktop/mcdonald-ec2/client/src/Admin/Component/ProductTable/ProductTable.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nimport { API_URL } from \"../../../config/contansts\";\r\nimport { Pagination } from \"antd\";\r\nimport axios from \"axios\";\r\nimport \"./ProductTable.scss\";\r\n\r\nconst StoreTable = ({ data, setData }) => {\r\n  const CId = useParams();  // 주소에서 카테고리id를 가져옴\r\n  const [currentPage, setCurrentPage] = useState(1); // 페이징 현제페이지\r\n  const itemsPerPage = 3; // 페이징 한번에 보여줄 tr의 개수\r\n  const columns = [ // 원하는 열의 이름을 추가\r\n    \"id\",\r\n    \"thumbnail_img_url\",\r\n    \"k_name\",\r\n    \"price\",\r\n    \"description\",\r\n    \"created_at\",\r\n  ]; \r\n\r\n  const handleDelete = (id) => {\r\n    // 삭제 로직 구현\r\n    axios\r\n      .delete(`${API_URL}/api/product/${id}`)\r\n      .then((res) => {\r\n        setData((prevProducts) =>\r\n          prevProducts.filter((prod) => prod.id !== id)\r\n          //삭제한 것 의외의 것만 담음\r\n        );\r\n        alert(\"삭제되었습니다.\");\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        alert(\"삭제에 실패했습니다.\");\r\n      });\r\n  };\r\n  // 현재 페이지용 인덱스 계산\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = data.slice(indexOfFirstItem, indexOfLastItem);\r\n  if (!currentItems || currentItems.length === 0) {\r\n    return <p>상품이 없습니다.</p>;\r\n  }\r\n  // 페이지 변경을 처리하는 함수\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div id=\"adminProd\">\r\n        <div id=\"adminProd_header\">\r\n          <h1>product</h1>\r\n          <NavLink to={\"upload\"} id=\"uploadBtn\" state={CId}>\r\n            <span>추가하기</span>\r\n          </NavLink>\r\n        </div>\r\n        <table className=\"ProdTable\">\r\n          <thead>\r\n            <tr>\r\n              {columns.map((column, index) => (\r\n                <th key={index}>{column}</th>\r\n              ))}\r\n              <th>수정</th>\r\n              <th>삭제</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {currentItems.map((prod, rowIndex) => (\r\n              <tr\r\n                key={rowIndex}\r\n                id={`id-${prod.id}`}\r\n                className={`rowIndex-${rowIndex}`}\r\n              >\r\n                {columns.map((column, colIndex) => (\r\n                  <>\r\n                    {colIndex === 1 ? (\r\n                      <td id=\"img_box\">\r\n                        <img\r\n                          id=\"burger_img\"\r\n                          src={API_URL + prod[column]}\r\n                          alt={`thumbnail-${prod.id}`}\r\n                        />\r\n                      </td>\r\n                    ) : (\r\n                      <td key={colIndex}>\r\n                      {colIndex === 3 ? prod[column].toLocaleString()+\"원\": prod[column]}\r\n                    </td>\r\n                    )}\r\n                  </>\r\n                ))}\r\n                <td>\r\n                  <NavLink id=\"editLink\" to={`edit`} state={prod}> {/* 클릭한 행의 상품정보를 state로 보냄 */}\r\n                    수정\r\n                  </NavLink>\r\n                </td>\r\n                <td>\r\n                  <button\r\n                    id=\"tableDeletebtn\"\r\n                    onClick={() => handleDelete(prod.id)}//클릭한 행의 상품의id를 보냄\r\n                  >\r\n                    삭제\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        {/* 페이징 */}\r\n        <div className=\"pagination\">\r\n          <Pagination\r\n            current={currentPage}\r\n            total={data.length}\r\n            pageSize={itemsPerPage}\r\n            onChange={handlePageChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StoreTable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{API_URL}from'../../config/contansts';import{useNavigate}from'react-router-dom';import{useRecoilState}from\"recoil\";import{loginState}from\"../../recoil/atoms/State\";import axios from'axios';import'./Login.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[isLabelVisibleId,setIsLabelVisibleId]=useState(false);// 라벨 보여지는 여부\nconst[isLabelVisiblePwd,setIsLabelVisiblePwd]=useState(false);const[islogin,setIslogin]=useRecoilState(loginState);//useState와 거의 비슷한 사용법\nconst inputRefId=useRef(null);const inputRefPwd=useRef(null);const navigate=useNavigate();/** 로그인 */const onSubmitLogin=async e=>{e.preventDefault();const email=e.target.email.value.trim();const pwd=e.target.pwd.value.trim();if(email!==\"\"&&pwd!==\"\"){console.log(email);axios.post(\"\".concat(API_URL,\"/api/user/login\"),{email,pwd},{withCredentials:true}// 쿠키 수정허용\n).then(()=>{alert(\"로그인성공!\");setIslogin(true);// 로컬스토리지에 저장. 브라우저닫아도 유지\nnavigate('/');}).catch(err=>{// console.error(err);\nconsole.error(err.response.data);alert(\"\\uB85C\\uADF8\\uC778 \\uC2E4\\uD328!\\n\".concat(err.response.data.message));});}else{return alert(\"전부 입력해주세요\");}};useEffect(()=>{const handleClickOutside=event=>{// 입력 필드 외부를 클릭하면 라벨을 숨깁니다.\nif(inputRefId.current&&!inputRefId.current.contains(event.target)&&inputRefPwd.current&&!inputRefPwd.current.contains(event.target)){const inputValueId=inputRefId.current.value.trim();const inputValuePwd=inputRefPwd.current.value.trim();// 입력 필드에 값이 있는 경우 라벨을 보이게 합니다.\nsetIsLabelVisibleId(!!inputValueId);setIsLabelVisiblePwd(!!inputValuePwd);}};// 이벤트 리스너 등록\ndocument.addEventListener('mousedown',handleClickOutside);// 컴포넌트가 언마운트될 때 이벤트 리스너 제거\nreturn()=>{document.removeEventListener('mousedown',handleClickOutside);};},[inputRefId,inputRefPwd]);const handleInputFocus=inputType=>{if(inputType==='id'){setIsLabelVisibleId(true);}else if(inputType==='pwd'){setIsLabelVisiblePwd(true);}};const handleInputBlur=inputType=>{const inputValue=inputType==='id'?inputRefId.current.value:inputRefPwd.current.value;// 만약 입력 필드가 비어있다면, 다시 라벨을 숨김\nif(!inputValue.trim()){if(inputType==='id'){setIsLabelVisibleId(false);}else if(inputType==='pwd'){setIsLabelVisiblePwd(false);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"Login\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:onSubmitLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uACC4\\uC815\\uC5D0 \\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD14C\\uC2A4\\uD2B8 id: qwer@naver.com\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD14C\\uC2A4\\uD2B8 pwd: qwer1234!\"}),/*#__PURE__*/_jsxs(\"ul\",{id:\"login-input\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"input-li\",children:[/*#__PURE__*/_jsx(\"label\",{className:isLabelVisibleId?'':'hidden',children:\"\\uC544\\uC774\\uB514(\\uC774\\uBA54\\uC77C\\uC8FC\\uC18C)\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRefId,type:\"text\",id:\"email\",placeholder:\"\\uC608) abc@gmail.com\",onFocus:()=>handleInputFocus('id')//focus 되었을때\n,onBlur:()=>handleInputBlur('id')//focus 가 해제되었을때\n})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"input-li\",children:[/*#__PURE__*/_jsx(\"label\",{className:isLabelVisiblePwd?'':'hidden',children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRefPwd,type:\"password\",id:\"pwd\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",onFocus:()=>handleInputFocus('pwd'),onBlur:()=>handleInputBlur('pwd')})]})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"login-btn\",type:\"submit\",children:\"\\uACC4\\uC815\\uC5D0 \\uB85C\\uADF8\\uC778\"})}),/*#__PURE__*/_jsx(\"li\",{id:\"login-footer\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Copyright \\xA9 2023 McDonald's\"})})]})});}export default Login;","map":{"version":3,"names":["React","useState","useRef","useEffect","API_URL","useNavigate","useRecoilState","loginState","axios","jsx","_jsx","jsxs","_jsxs","Login","isLabelVisibleId","setIsLabelVisibleId","isLabelVisiblePwd","setIsLabelVisiblePwd","islogin","setIslogin","inputRefId","inputRefPwd","navigate","onSubmitLogin","e","preventDefault","email","target","value","trim","pwd","console","log","post","concat","withCredentials","then","alert","catch","err","error","response","data","message","handleClickOutside","event","current","contains","inputValueId","inputValuePwd","document","addEventListener","removeEventListener","handleInputFocus","inputType","handleInputBlur","inputValue","className","children","id","onSubmit","ref","type","placeholder","onFocus","onBlur"],"sources":["C:/Users/user/Desktop/mcdonald-ec2/client/src/page/Login/Login.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { API_URL } from '../../config/contansts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginState } from \"../../recoil/atoms/State\";\r\nimport axios from 'axios';\r\nimport './Login.scss';\r\n\r\nfunction Login() {\r\n\tconst [isLabelVisibleId, setIsLabelVisibleId] = useState(false); // 라벨 보여지는 여부\r\n\tconst [isLabelVisiblePwd, setIsLabelVisiblePwd] = useState(false);\r\n\tconst [islogin, setIslogin] = useRecoilState(loginState); //useState와 거의 비슷한 사용법\r\n\tconst inputRefId = useRef(null);\r\n\tconst inputRefPwd = useRef(null);\r\n\tconst navigate = useNavigate();\r\n\r\n\t/** 로그인 */\r\n\tconst onSubmitLogin = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst email = e.target.email.value.trim();\r\n\t\tconst pwd = e.target.pwd.value.trim();\r\n\r\n\t\tif( email !== \"\" && pwd !== \"\"){\r\n\t\t\tconsole.log(email);\r\n\t\t\taxios.post(\r\n\t\t\t\t`${API_URL}/api/user/login`,\r\n\t\t\t\t{email, pwd},\r\n\t\t\t\t{ withCredentials: true }// 쿠키 수정허용\r\n\t\t\t)\r\n\t\t\t.then(() =>{\r\n\t\t\t\talert(\"로그인성공!\");\r\n\t\t\t\tsetIslogin(true);// 로컬스토리지에 저장. 브라우저닫아도 유지\r\n\t\t\t\tnavigate('/');  \r\n\t\t\t})\r\n\t\t\t.catch(err =>{\r\n\t\t\t\t// console.error(err);\r\n\t\t\t\tconsole.error(err.response.data);\r\n\t\t\t\talert(`로그인 실패!\\n${err.response.data.message}`);\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\treturn alert(\"전부 입력해주세요\");\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (event) => {\r\n\t\t\t// 입력 필드 외부를 클릭하면 라벨을 숨깁니다.\r\n\t\t\tif (\r\n\t\t\t\tinputRefId.current &&\r\n\t\t\t\t!inputRefId.current.contains(event.target) &&\r\n\t\t\t\tinputRefPwd.current &&\r\n\t\t\t\t!inputRefPwd.current.contains(event.target)\r\n\t\t\t) {\r\n\t\t\t\tconst inputValueId = inputRefId.current.value.trim();\r\n\t\t\t\tconst inputValuePwd = inputRefPwd.current.value.trim();\r\n\r\n\t\t\t\t// 입력 필드에 값이 있는 경우 라벨을 보이게 합니다.\r\n\t\t\t\tsetIsLabelVisibleId(!!inputValueId);\r\n\t\t\t\tsetIsLabelVisiblePwd(!!inputValuePwd);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// 이벤트 리스너 등록\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\t// 컴포넌트가 언마운트될 때 이벤트 리스너 제거\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [inputRefId, inputRefPwd]);\r\n\r\n\tconst handleInputFocus = (inputType) => {\r\n\t\tif (inputType === 'id') {\r\n\t\t\tsetIsLabelVisibleId(true);\r\n\t\t} else if (inputType === 'pwd') {\r\n\t\t\tsetIsLabelVisiblePwd(true);\r\n\t\t}\r\n\t};\r\n\tconst handleInputBlur = (inputType) => {\r\n\t\tconst inputValue = inputType === 'id' ? inputRefId.current.value : inputRefPwd.current.value;\r\n\t\t// 만약 입력 필드가 비어있다면, 다시 라벨을 숨김\r\n\t\tif (!inputValue.trim()) {\r\n\t\t\tif(inputType === 'id') {\r\n\t\t\t\tsetIsLabelVisibleId(false);\r\n\t\t\t}else if(inputType === 'pwd') {\r\n\t\t\t\tsetIsLabelVisiblePwd(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\treturn (\r\n\t<div className=\"Login\">\r\n\t\t<form id='login-form' onSubmit={onSubmitLogin}>\r\n\t\t\t<h1>계정에 로그인</h1>\r\n\t\t\t<p>테스트 id: qwer@naver.com</p>\r\n\t\t\t<p>테스트 pwd: qwer1234!</p>\r\n\t\t\t<ul id='login-input'>\r\n\t\t\t\t<li className=\"input-li\">\r\n\t\t\t\t\t<label className={isLabelVisibleId ? '' : 'hidden'}>아이디(이메일주소)</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tref={inputRefId}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"예) abc@gmail.com\"\r\n\t\t\t\t\t\tonFocus={() => handleInputFocus('id')}//focus 되었을때\r\n\t\t\t\t\t\tonBlur={() => handleInputBlur('id')}//focus 가 해제되었을때\r\n\t\t\t\t\t/>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className=\"input-li\">\r\n\t\t\t\t\t<label className={isLabelVisiblePwd ? '' : 'hidden'}>비밀번호</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tref={inputRefPwd}\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tid=\"pwd\"\r\n\t\t\t\t\t\tplaceholder=\"비밀번호\"\r\n\t\t\t\t\t\tonFocus={() => handleInputFocus('pwd')}\r\n\t\t\t\t\t\tonBlur={() => handleInputBlur('pwd')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t{/* <li><a href=\"/\">비밀번호를 잊어버렸습니까?</a></li> */}\r\n\t\t\t<li><button id='login-btn' type='submit'>계정에 로그인</button></li>\r\n\t\t\t<li id='login-footer'>\r\n\t\t\t\t<span>Copyright © 2023 McDonald's</span>\r\n\t\t\t</li>\r\n\t\t</form>\r\n\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState}from'react';import'./StoreTable.scss';import{NavLink}from'react-router-dom';import{Pagination}from'antd';import axios from'axios';import{API_URL}from'../../../config/contansts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StoreTable=_ref=>{let{data}=_ref;const[inputVal,setInputVal]=useState(null);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=10;// 현재 페이지용 인덱스 계산\nconst indexOfLastItem=currentPage*itemsPerPage;const indexOfFirstItem=indexOfLastItem-itemsPerPage;// const currentItems = data.slice(indexOfFirstItem, indexOfLastItem);\nconst currentItems=data.items.slice(indexOfFirstItem,indexOfLastItem);// const [selectedItem, setSelectedItem] = useState(null);\n// const [isModalOpen, setIsModalOpen] = useState(false);\nif(!data.items||data.items.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"No data available.\"});}// const columns = data.length > 0 ? Object.keys(data[0]) : [];\nconst columns=['id','store_name','phone','address'];// 원하는 열의 이름을 추가\nconst handleDelete=item=>{let yn_delete=window.confirm(\"정말 삭제하시겠습니까?\");if(yn_delete){axios.delete(\"\".concat(API_URL,\"/api/store/\").concat(item.id)).then(res=>{console.log(\"응답 데이터: \",res.data);alert(\"삭제되었습니다.\");data.setItems(prevResult=>prevResult.filter(entry=>entry.id!==item.id));}).catch(err=>{console.error(err);});}else{return;}};// 페이지 변경을 처리하는 함수\nconst handlePageChange=page=>{setCurrentPage(page);};return/*#__PURE__*/_jsxs(\"div\",{className:\"jh_main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbtn\",children:/*#__PURE__*/_jsx(NavLink,{to:\"add\",id:\"jh_button\",children:\"\\uCD94\\uAC00\\uD558\\uAE30\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"StoreTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[columns.map((column,index)=>/*#__PURE__*/_jsx(\"th\",{children:column},index)),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0AD\\uC81C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentItems.map((item,rowIndex)=>/*#__PURE__*/_jsxs(\"tr\",{id:\"id-\".concat(item.id),className:\"rowIndex-\".concat(rowIndex),children:[columns.map((column,colIndex)=>/*#__PURE__*/_jsx(\"td\",{children:item[column]},colIndex)),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"edit\",state:item,style:{marginRight:\"5px\",padding:\"5px 10px\",backgroundColor:\"rgb(255, 188, 13)\",color:\"white\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"\\uC218\\uC815\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item),style:{padding:\"5px 10px\",backgroundColor:\"rgb(244, 67, 54)\",color:\"white\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"\\uC0AD\\uC81C\"})})]},rowIndex))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:/*#__PURE__*/_jsx(Pagination,{current:currentPage,total:data.items.length,pageSize:itemsPerPage,onChange:handlePageChange})})]});};export default StoreTable;","map":{"version":3,"names":["React","useState","NavLink","Pagination","axios","API_URL","jsx","_jsx","jsxs","_jsxs","StoreTable","_ref","data","inputVal","setInputVal","currentPage","setCurrentPage","itemsPerPage","indexOfLastItem","indexOfFirstItem","currentItems","items","slice","length","children","columns","handleDelete","item","yn_delete","window","confirm","delete","concat","id","then","res","console","log","alert","setItems","prevResult","filter","entry","catch","err","error","handlePageChange","page","className","to","map","column","index","rowIndex","colIndex","state","style","marginRight","padding","backgroundColor","color","border","borderRadius","cursor","onClick","current","total","pageSize","onChange"],"sources":["C:/Users/user/Desktop/mcdonald-ec2/client/src/Admin/Component/StoreTable/StoreTable.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './StoreTable.scss';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Pagination } from 'antd';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../../../config/contansts';\r\n\r\nconst StoreTable = ({ data }) => {\r\n  const [inputVal, setInputVal] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 10;\r\n  // 현재 페이지용 인덱스 계산\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  // const currentItems = data.slice(indexOfFirstItem, indexOfLastItem);\r\n  const currentItems = data.items.slice(indexOfFirstItem, indexOfLastItem);\r\n  // const [selectedItem, setSelectedItem] = useState(null);\r\n  // const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  if (!data.items || data.items.length === 0) {\r\n    return <p>No data available.</p>;\r\n  }\r\n\r\n  // const columns = data.length > 0 ? Object.keys(data[0]) : [];\r\n  const columns = ['id', 'store_name', 'phone', 'address']; // 원하는 열의 이름을 추가\r\n\r\n  const handleDelete = (item) => {\r\n    let yn_delete = window.confirm(\"정말 삭제하시겠습니까?\");\r\n\r\n    if (yn_delete) {\r\n      axios.delete(`${API_URL}/api/store/${item.id}`)\r\n      .then(res => {\r\n        console.log(\"응답 데이터: \", res.data);\r\n        alert(\"삭제되었습니다.\");\r\n        data.setItems((prevResult) =>\r\n          prevResult.filter((entry) => entry.id !== item.id)\r\n        );\r\n\r\n      }).catch((err) =>{\r\n        console.error(err);\r\n      });\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  \r\n\r\n  // 페이지 변경을 처리하는 함수\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  return (\r\n    <div className='jh_main'>\r\n      <div className='navbtn'>\r\n        {/* 추가 페이지로 이동하는 링크 */}\r\n        <NavLink to=\"add\" id='jh_button'>추가하기</NavLink>\r\n      </div>\r\n\r\n      {/* 추가 페이지 라우트 */}\r\n      {/* <StoreAdd /> */}\r\n      <table className='StoreTable'>\r\n        <thead>\r\n          <tr>\r\n            {columns.map((column, index) => (\r\n              <th key={index}>{column}</th>\r\n            ))}\r\n            <th>수정</th>\r\n            <th>삭제</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {currentItems.map((item, rowIndex) => (\r\n            <tr key={rowIndex} id={`id-${item.id}`} className={ `rowIndex-${rowIndex}`}>\r\n              {columns.map((column, colIndex) => (\r\n                <td key={colIndex}>\r\n                  {item[column]}\r\n                </td>\r\n              ))}\r\n              <td>\r\n                <NavLink to={`edit`} state={item} \r\n                style={{\r\n                  marginRight: \"5px\",\r\n                  padding: \"5px 10px\",\r\n                  backgroundColor: \"rgb(255, 188, 13)\",\r\n                  color: \"white\",\r\n                  border: \"none\",\r\n                  borderRadius: \"5px\",\r\n                  cursor: \"pointer\",\r\n                  }}>수정</NavLink>\r\n              </td>\r\n              <td>\r\n                <button onClick={() => handleDelete(item)}\r\n                style={{\r\n                  padding: \"5px 10px\",\r\n                  backgroundColor: \"rgb(244, 67, 54)\",\r\n                  color: \"white\",\r\n                  border: \"none\",\r\n                  borderRadius: \"5px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n                >삭제</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* 페이징 */}\r\n      <div className=\"pagination\">\r\n        <Pagination\r\n          current={currentPage}\r\n          total={data.items.length}\r\n          pageSize={itemsPerPage}\r\n          onChange={handlePageChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StoreTable;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,mBAAmB,CAC1B,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,OAASC,UAAU,KAAQ,MAAM,CACjC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC1B,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAgB,YAAY,CAAG,EAAE,CACvB;AACA,KAAM,CAAAC,eAAe,CAAGH,WAAW,CAAGE,YAAY,CAClD,KAAM,CAAAE,gBAAgB,CAAGD,eAAe,CAAGD,YAAY,CACvD;AACA,KAAM,CAAAG,YAAY,CAAGR,IAAI,CAACS,KAAK,CAACC,KAAK,CAACH,gBAAgB,CAAED,eAAe,CAAC,CACxE;AACA;AAEA,GAAI,CAACN,IAAI,CAACS,KAAK,EAAIT,IAAI,CAACS,KAAK,CAACE,MAAM,GAAK,CAAC,CAAE,CAC1C,mBAAOhB,IAAA,MAAAiB,QAAA,CAAG,oBAAkB,CAAG,CAAC,CAClC,CAEA;AACA,KAAM,CAAAC,OAAO,CAAG,CAAC,IAAI,CAAE,YAAY,CAAE,OAAO,CAAE,SAAS,CAAC,CAAE;AAE1D,KAAM,CAAAC,YAAY,CAAIC,IAAI,EAAK,CAC7B,GAAI,CAAAC,SAAS,CAAGC,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,CAE9C,GAAIF,SAAS,CAAE,CACbxB,KAAK,CAAC2B,MAAM,IAAAC,MAAA,CAAI3B,OAAO,gBAAA2B,MAAA,CAAcL,IAAI,CAACM,EAAE,CAAE,CAAC,CAC9CC,IAAI,CAACC,GAAG,EAAI,CACXC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEF,GAAG,CAACvB,IAAI,CAAC,CACjC0B,KAAK,CAAC,UAAU,CAAC,CACjB1B,IAAI,CAAC2B,QAAQ,CAAEC,UAAU,EACvBA,UAAU,CAACC,MAAM,CAAEC,KAAK,EAAKA,KAAK,CAACT,EAAE,GAAKN,IAAI,CAACM,EAAE,CACnD,CAAC,CAEH,CAAC,CAAC,CAACU,KAAK,CAAEC,GAAG,EAAI,CACfR,OAAO,CAACS,KAAK,CAACD,GAAG,CAAC,CACpB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,OACF,CAGF,CAAC,CAID;AACA,KAAM,CAAAE,gBAAgB,CAAIC,IAAI,EAAK,CACjC/B,cAAc,CAAC+B,IAAI,CAAC,CACtB,CAAC,CAED,mBACEtC,KAAA,QAAKuC,SAAS,CAAC,SAAS,CAAAxB,QAAA,eACtBjB,IAAA,QAAKyC,SAAS,CAAC,QAAQ,CAAAxB,QAAA,cAErBjB,IAAA,CAACL,OAAO,EAAC+C,EAAE,CAAC,KAAK,CAAChB,EAAE,CAAC,WAAW,CAAAT,QAAA,CAAC,0BAAI,CAAS,CAAC,CAC5C,CAAC,cAINf,KAAA,UAAOuC,SAAS,CAAC,YAAY,CAAAxB,QAAA,eAC3BjB,IAAA,UAAAiB,QAAA,cACEf,KAAA,OAAAe,QAAA,EACGC,OAAO,CAACyB,GAAG,CAAC,CAACC,MAAM,CAAEC,KAAK,gBACzB7C,IAAA,OAAAiB,QAAA,CAAiB2B,MAAM,EAAdC,KAAmB,CAC7B,CAAC,cACF7C,IAAA,OAAAiB,QAAA,CAAI,cAAE,CAAI,CAAC,cACXjB,IAAA,OAAAiB,QAAA,CAAI,cAAE,CAAI,CAAC,EACT,CAAC,CACA,CAAC,cACRjB,IAAA,UAAAiB,QAAA,CACGJ,YAAY,CAAC8B,GAAG,CAAC,CAACvB,IAAI,CAAE0B,QAAQ,gBAC/B5C,KAAA,OAAmBwB,EAAE,OAAAD,MAAA,CAAQL,IAAI,CAACM,EAAE,CAAG,CAACe,SAAS,aAAAhB,MAAA,CAAeqB,QAAQ,CAAG,CAAA7B,QAAA,EACxEC,OAAO,CAACyB,GAAG,CAAC,CAACC,MAAM,CAAEG,QAAQ,gBAC5B/C,IAAA,OAAAiB,QAAA,CACGG,IAAI,CAACwB,MAAM,CAAC,EADNG,QAEL,CACL,CAAC,cACF/C,IAAA,OAAAiB,QAAA,cACEjB,IAAA,CAACL,OAAO,EAAC+C,EAAE,OAAS,CAACM,KAAK,CAAE5B,IAAK,CACjC6B,KAAK,CAAE,CACLC,WAAW,CAAE,KAAK,CAClBC,OAAO,CAAE,UAAU,CACnBC,eAAe,CAAE,mBAAmB,CACpCC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACR,CAAE,CAAAvC,QAAA,CAAC,cAAE,CAAS,CAAC,CACf,CAAC,cACLjB,IAAA,OAAAiB,QAAA,cACEjB,IAAA,WAAQyD,OAAO,CAAEA,CAAA,GAAMtC,YAAY,CAACC,IAAI,CAAE,CAC1C6B,KAAK,CAAE,CACLE,OAAO,CAAE,UAAU,CACnBC,eAAe,CAAE,kBAAkB,CACnCC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SACV,CAAE,CAAAvC,QAAA,CACD,cAAE,CAAQ,CAAC,CACV,CAAC,GA7BE6B,QA8BL,CACL,CAAC,CACG,CAAC,EACH,CAAC,cAGR9C,IAAA,QAAKyC,SAAS,CAAC,YAAY,CAAAxB,QAAA,cACzBjB,IAAA,CAACJ,UAAU,EACT8D,OAAO,CAAElD,WAAY,CACrBmD,KAAK,CAAEtD,IAAI,CAACS,KAAK,CAACE,MAAO,CACzB4C,QAAQ,CAAElD,YAAa,CACvBmD,QAAQ,CAAEtB,gBAAiB,CAC5B,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAApC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}